# Задание 7: Модификация существующего образа

## Задача

Взять готовый образ `mostafamoradian/xk6-kafka` и:
1. Добавить редактор `nano`
2. Изменить ENTRYPOINT и CMD для запуска shell вместо k6

---

## Контекст

**xk6-kafka** - это расширение k6 для нагрузочного тестирования Kafka.

**Проблема:**
- Оригинальный образ запускается с `ENTRYPOINT ["k6"]`
- Сразу пытается выполнить k6-команду
- Нельзя зайти в контейнер для отладки/редактирования файлов

**Решение:**
- Расширить образ
- Установить nano
- Переопределить ENTRYPOINT/CMD для запуска shell

---

## Анализ оригинального образа

### Проверка текущих настроек:

```bash
docker pull mostafamoradian/xk6-kafka:latest

docker image inspect mostafamoradian/xk6-kafka:latest \
  --format '{{.Config.Entrypoint}} | {{.Config.Cmd}}'
```

Вывод: `[k6] | []`

**Это значит:**
- ENTRYPOINT: `["k6"]`
- CMD: пусто
- При запуске контейнер пытается выполнить команду `k6`

---

Образ основан на Alpine Linux → используем `apk`
`--no-cache` - не сохранять кэш (меньше размер)

Переопределение ENTRYPOINT
- Оригинал: `["k6"]` - всегда запускается k6
- Новое: `["/bin/sh"]` - запускается shell