[defaults]
# Путь к inventory файлу по умолчанию
inventory = ./inventory.ini

# ВАЖНО: Временная директория на удаленных хостах (контейнерах)
remote_tmp = /tmp/.ansible/tmp

# Отключить проверку SSH ключей хоста
host_key_checking = False

# Интерпретатор Python
interpreter_python = auto_silent

# Количество параллельных процессов
forks = 10

# Таймаут для подключения
timeout = 30

# Отключить сбор фактов по умолчанию (можно включить в плейбуке)
gathering = smart

# Кэш фактов
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
fact_caching_timeout = 3600

# Красивый вывод
stdout_callback = yaml
callbacks_enabled = timer, profile_tasks

# Логирование
log_path = ./ansible.log

# Retry файлы
retry_files_enabled = True
retry_files_save_path = ./retry

# Роли
roles_path = ./roles

[privilege_escalation]
# Настройки sudo
become = False
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# SSH настройки
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
# Для docker connection устанавливаем локальную временную директорию
local_tmp = /tmp/.ansible/local

[inventory]
# Игнорировать предупреждения
enable_plugins = host_list, script, auto, yaml, ini, toml