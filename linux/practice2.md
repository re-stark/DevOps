Есть 3 инстанса приложения на портах 3001, 3002, 3003. Нужен балансировщик

Че сделать:
1. Настроить upstream с 3 бэкендами:
   - Round-robin балансировка
   - Хелзчеки (max_fails=2, fail_timeout=30s)
   
2. Настроить server блок:
   - Домен: app.example.local
   - HTTPS с самоподписанным сертом сертификатом
   - Редирект с HTTP на HTTPS
   
3. Настроить буферизацию и таймауты:
   - proxy_connect_timeout 5s
   - proxy_send_timeout 60s
   - proxy_read_timeout 60s
   - client_max_body_size 100M
   
4. Настроить кеширование статики:
   - Кешировать картинки, css, js на 30 дней
   - Добавить правильные заголовки
   
5. Настроить логирование:
   - Access log с временем ответа
   - Error log уровня warn
   - Ротация логов через logrotate
   
6. Добавить базовую защиту:
   - Rate limiting: 10 req/sec per IP
   - Скрыть версию nginx

Проверка:

- curl на все ендпоинты
- Проверить балансировку между инстансами
- Убить один бэкенд и проверить что все норм